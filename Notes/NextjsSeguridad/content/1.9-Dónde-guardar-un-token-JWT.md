## 1.9 ¿Dónde guardar un token JWT?

### 1.9.1 JWT en Cookies

Estaremos seguros contra ataques XSS, pero inseguros contra CSRF.

### 1.9.2 Session Storage

Nos mantendremos seguros contra ataques de CSRF, pero estaremos
inseguros contra ataques XSS.

### 1.9.3 Recomendaciones de OWASP

La recomendación para sesiones es

-   Guardar tokens en el sessiónStorage.
-   Fingerprint adicional contra XSS

La recomendación para cookies es

-   Si se usan cookies usar los atributos Secure y HttpOnly.
-   PRotección adicional contra CSRF.

### 1.9.4 Next Auth

Nextjs se encarga de realizar la Autenticación en el navegador. Los JWT
se crea en el server y se manda como cookie con los atributos Secure y
HttpOnly. Además, Next Auth usa CSRF para páginas de login y logout.

### 1.9.5 Guardar tokens

Podemos usar un webworker para interceptar las peticiones web y
adjuntarles un token, de la misma manera puede recibir las peticiones y
limpiarlas de datos sensibles. Una desventaja es que no todos los
navegadores tienen soporte para estos, además es sensible al mismo tipo
de vulnerabilidades.

