## 1.4 Creación de índices y documentos

Elastic search crea un índice por defecto si no existe, al nosotros
hacer una petición. Hacemos una llamada PUT con datos en formato JSON.

``` json
{
"nombre": "Rick",
"Apellido": "Sánchez"
}
```

Para crear un documento usaremos la palabra \_doc después del nombre de
nuestro índice. Podemos especificar un id también

``` bash
localhost:9200/usuarios/_doc/1
```

Una creación exitosa nos devolverá

``` json
{
    "_index": "usuarios",
    "_type": "_doc",
    "_id": "1",
    "_version": 1,
    "result": "created",
    "_shards": {
        "total": 2,
        "successful": 1,
        "failed": 0
    },
    "_seq_no": 0,
    "_primary_term": 1
}
```

Si no especificamos un id, elasticsearch creará uno por nosotros.

``` bash
localhost:9200/usuarios/_doc
```

``` json
{
    "_index": "usuarios",
    "_type": "_doc",
    "_id": "j-Ds8XIBALchyRGT9Lz-",
    "_version": 1,
    "result": "created",
    "_shards": {
        "total": 2,
        "successful": 1,
        "failed": 0
    },
    "_seq_no": 1,
    "_primary_term": 1
}
```

### 1.4.1 Creación múltiple

Para crear varios documentos crearemos un archivo *usuarios.json* Este
archivo debe terminan con una linea vacia.

``` javascript
{"index": {"_id": "3"}}
{"nombre": "Beth", "apellido": "Smith"}
{"index": {"_id": "4"}}
{"nombre": "Jerry", "apellido": "Smith"}
```

Mandaremos este archivo con método POST a la dirección

``` bash
localhost:9200/usuarios/_bulk
```

Lo anterior nos generará una respuesta de este tipo

``` json
{
    "took": 273,
    "errors": false,
    "items": [
        {
            "index": {
                "_index": "usuarios",
                "_type": "_doc",
                "_id": "3",
                "_version": 1,
                "result": "created",
                "_shards": {
                    "total": 2,
                    "successful": 1,
                    "failed": 0
                },
                "_seq_no": 2,
                "_primary_term": 1,
                "status": 201
            }
        },
        {
            "index": {
                "_index": "usuarios",
                "_type": "_doc",
                "_id": "4",
                "_version": 1,
                "result": "created",
                "_shards": {
                    "total": 2,
                    "successful": 1,
                    "failed": 0
                },
                "_seq_no": 3,
                "_primary_term": 1,
                "status": 201
            }
        }
    ]
}
```

