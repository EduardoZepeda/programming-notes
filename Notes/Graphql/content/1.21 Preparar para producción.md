## 1.21 Preparar para producción

Para subir un servidor de graphql a producción necesitamos el paquete de
express y un middleware. Usaremos el paquete cors, para los headers
necesarios para servir el contenido desde cualquier origen.

``` bash
npm i cors
```

Usaremos cors en el archivo de express para quitar la consola
interactiva de graphql

``` javascript
const app = express()
const cors = require('cors')
app.use(cors())
```

Y podremos usar la variable NODE_ENV para desactivarla directo en la
ruta /api de manera personalizada dependiendo de la variable de entorno.

``` javascript
const isDev = process.env.NODE_ENV !== 'production'

app.use('/api', graphqlHTTP({
    schema: schema,
    rootValue: resolvers,
    graphiql: isDev
}))
```

Ya en package.json o en otro archivo podemos hacer algo como:

``` javascript
"scripts": {
    "start": "NODE_ENV=production node index",
}
```

